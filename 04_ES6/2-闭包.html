<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

    <script>
        
        //闭包是指有权访问另一个函数作用域中的变量的函数
        function f1() {
            var n = 123;
            function f2() {    //f2是一个闭包
                console.info(n)
            }
           f2()
        }
        //子对象会一级一级向上寻找所有父对象的变量，反之不行。
        //所以f2中，可以访问到n，此为闭包
        f1();

        //场景1，实现动态数据过滤
        let array = [20,30,40,21,1,2,5,67,8,3,100,200,130]
        //返回大于100的数据
        let r1 = array.filter((n)=>{
            return n>100
        })
        console.info(r1)
        //返回大于50的数据
        let r2 = array.filter((n)=>{
            return n>50
        })
        console.info(r2)

        //以上代码有什么问题吗？
        //在于 写了逻辑重复的代码
        //可以通过闭包来优化
        function compare(num){
            function fn(n){
                return n>num
            }
            return fn;
        }
        let r3 = array.filter(compare(100));
        console.info(r3)

        let r4 = array.filter(compare(50));
        console.info(r4)
    </script>
</body>

</html>